<ul class="toolbar email-toolbar">



    <li class="dropdown-container" ng-if="!settings.toolbarDisplayEnabled">
      <a href="" class="dropdown-trigger"
        ng-click="toggleDropdown($event, 'display')"
        ng-class="{ open: dropdownOpen == 'display' }"
      >
        <i class="fa fa-file-o"></i>
        <span ng-if="!panelVisibility || panelVisibility === 'html'">HTML</span>
        <span ng-if="panelVisibility === 'plain'">Text</span>
        <span ng-if="panelVisibility === 'attachments'">Attachments</span>
        <span ng-if="panelVisibility === 'headers'">Headers</span>
        <span ng-if="panelVisibility === 'source'">Source</span>
      </a>
      <ul class="dropdown-menu">
        <li>
            <a href="" class=""
              ng-click="show('html')"
              ng-class="{ active: panelVisibility == 'html', disabled: !item.html }">
                <i class="fa fa-code"></i>
                HTML
            </a>
        </li>
        <li>
            <a href="" class=""
              ng-click="show('plain')"
              ng-class="{ active: panelVisibility == 'plain' }">
                <i class="fa fa-file-text-o"></i>
                Text
            </a>
        </li>
        <li>
            <a href="" class=""
              ng-click="show('attachments')"
              ng-class="{ active: panelVisibility == 'attachments', disabled: !item.attachments }">
                <i class="fa fa-paperclip"></i>
                Attachments
            </a>
        </li>
        <li>
            <a href="" class=""
              ng-click="show('headers')"
              ng-class="{ active: panelVisibility == 'headers' }">
                <i class="fa fa-list"></i>
                Headers
            </a>
        </li>
        <li>
            <a href="" class=""
              ng-click="show('source')"
              ng-class="{ active: panelVisibility == 'source' }">
                <i class="fa fa-file"></i>
                Source
            </a>
        </li>
      </ul>
    </li>


    <li ng-if="settings.toolbarDisplayEnabled">
      <ul class="toolbar">
        <li>
            <a href="" class=""
               ng-click="show('html')"
               ng-class="{ active: panelVisibility == 'html', disabled: !item.html }"
               title="HTML">
              <i class="fa fa-code"></i>
            </a>
        </li>
        <li>
            <a href="" class=""
               ng-click="show('plain')"
               ng-class="{ active: panelVisibility == 'plain' }"
               title="Plain Text">
              <i class="fa fa-file-text-o"></i>
            </a>
        </li>
        <li>
            <a href="" class=""
               ng-click="show('headers')"
               ng-class="{ active: panelVisibility == 'headers' }"
               title="Headers">
              <i class="fa fa-list"></i>
            </a>
        </li>
        <li>
            <a href="" class=""
               ng-click="show('source')"
               ng-class="{ active: panelVisibility == 'source' }"
               title="Source">
              <i class="fa fa-file"></i>
            </a>
        </li>
        <li class="disabled">|</li>
      </ul>
    </li>


    <li class="dropdown-container" ng-if="!settings.toolbarDisplayEnabled">
      <a href="" class="dropdown-trigger"
        ng-click="toggleDropdown($event, 'viewport')"
        ng-class="{ open: dropdownOpen == 'viewport', disabled: panelVisibility != 'html' }">
        <i class="fa fa-tablet"></i>
        Viewport
      </a>
      <ul class="dropdown-menu">
        <li>
          <a href="" class=""
            ng-click="resize('320px')"
            ng-class="{ active: iframeSize == '320px' }">
              <i class="fa fa-mobile fa-mobile-smaller"></i>
              320px
          </a>
      </li>
      <li>
          <a href="" class=""
            ng-click="resize('480px')"
            ng-class="{ active: iframeSize == '480px' }">
              <i class="fa fa-mobile"></i>
              480px
          </a>
      </li>
      <li>
          <a href="" class=""
            ng-click="resize('600px')"
            ng-class="{ active: iframeSize == '600px' }">
              <i class="fa fa-tablet"></i>
              600px
          </a>
      </li>
      <li>
          <a href="" class=""
            ng-click="resize()"
            ng-class="{ active: iframeSize == null }">
              <i class="fa fa-desktop"></i>
              Full
          </a>
      </li>
      </ul>
    </li>

    <li ng-if="settings.toolbarDisplayEnabled">
        <ul class="toolbar">
          <li>
            <a href="" class=""
               ng-click="resize('320px')"
               ng-class="{ active: iframeSize == '320px' }"
               title="320px">
              <i class="fa fa-mobile fa-mobile-smaller"></i>
            </a>
          </li>
          <li>
            <a href="" class=""
               ng-click="resize('480px')"
               ng-class="{ active: iframeSize == '480px' }"
               title="480px">
              <i class="fa fa-mobile"></i>
            </a>
          </li>
          <li>
            <a href="" class=""
               ng-click="resize('600px')"
               ng-class="{ active: iframeSize == '600px' }"
               title="600px">
              <i class="fa fa-tablet"></i>
            </a>
          </li>
          <li>
            <a href="" class=""
               ng-click="resize()"
               ng-class="{ active: iframeSize == null }"
               title="full">
              <i class="fa fa-desktop"></i>
            </a>
          </li>
          <li class="disabled">|</li>
        </ul>
    </li>



    <li>
        <a href="email/{{item.id}}/download" class="">
            <i class="fa fa-cloud-download"></i>
            Download
        </a>
    </li>




    <li class="dropdown-container" ng-if="!settings.toolbarDisplayEnabled">
      <a href="" class="dropdown-trigger"
        ng-click="toggleDropdown($event, 'relay')"
        ng-class="{ open: dropdownOpen == 'relay' }"
      >
        <i class="fa fa-forward"></i>
        Relay
      </a>
      <ul class="dropdown-menu">
        <li>
          <a href="" class=""
            ng-click="relay(item)"
            ng-class="{ disabled: !config.isOutgoingEnabled }">
              <i class="fa fa-forward"></i>
              Relay
          </a>
        </li>
        <li>
          <a href="" class=""
            ng-click="relayTo(item)"
            ng-class="{ disabled: !config.isOutgoingEnabled }">
              <i class="fa fa-forward"></i>
              Relay to...
          </a>
        </li>
      </ul>
    </li>





    <li>
        <a href="" class=""
          ng-click="delete(item)">
            <i class="fa fa-trash-o"></i>
            Delete
        </a>
    </li>
</ul>


<div class="email-content">

    <div class="email-content-view email-content-view-html" ng-hide="panelVisibility != 'html'">
      <iframe ng-src="{{ item.iframeUrl }}" class="preview-iframe panel-html" >Hello World</iframe>
    </div>

    <div class="email-content-view email-content-view-plain" ng-hide="panelVisibility != 'plain'">
      <div class="plain-text panel-plain" ng-bind-html=" item.text|escapeHTML " ></div>
    </div>

    <div class="email-content-view email-content-view-attachments" ng-hide="panelVisibility != 'attachments'">
      <div class="panel-attachments" >
          <span ng-repeat="attachment in item.attachments">
              <a target="_blank" ng-href="email/{{item.id}}/attachment/{{attachment.generatedFileName | encodeURIComponent}}">
                  <strong>{{attachment.generatedFileName}}</strong>
              </a>
              <br>
          </span>
      </div>
    </div>

    <div class="email-content-view email-content-view-headers" ng-hide="panelVisibility != 'headers'">
      <div class="panel-headers" >
          <table class="table">
              <!--
              <thead>
                  <tr>
                      <th>Key</th>
                      <th>Value</th>
                  </tr>
              </thead>
              -->
              <tr ng-repeat="(headerKey, headerValue) in item.headers">
                  <td class="span3">
                      <strong>{{headerKey}}</strong>
                  </td>
                  <td>
                      {{headerValue}}
                  </td>
              </tr>
          </table>
      </div>
    </div>

    <div class="email-content-view email-content-view-source" ng-hide="panelVisibility != 'source'">
      <iframe ng-src="{{ rawEmail }}" class="preview-iframe panel-source" ></iframe>
    </div>

</div>
